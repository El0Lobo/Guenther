<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metzgerei Günther Flyer</title>
    <link rel="stylesheet" href="styles1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/4.0.0/introjs.min.css">
</head>
<body>
    <div class="flyer">
        <div class="header" data-intro="Unser Logo mit dem Hintergrund der Höri und der stilisierten Kuh.">
            <img src="pics/logo background small.png" alt="Logo mit Hintergrund der Höri und stilisierter Kuh" class="header-img">
        </div>
        <div class="content" data-intro="Hier sehen Sie unsere wöchentlich wechselnden Gerichte, die dynamisch angezeigt werden.">
            <h1>Wechselnde Gerichte <br>jeden Freitag<br> zum Feierabend von<br> 16 bis 18 Uhr</h1>
            <h2 class="custom-font">Diese Woche:</h2>
            <img id="dish-image" src="pics/Layer1.png" alt="Gericht Bild" class="content-img">
            <h2 id="dish-name" class="dish-name" data-intro="Der Name und das Bild des Gerichts aktualisieren sich automatisch.">Bratwurst mit Potato Wedges</h2>
            <div class="price" data-intro="Unterschiedliche Preise für Dine-In und To-Go.">
                <div class="price3">
                    <p id="price-dinein">7,60 €</p>
                </div>
                <div class="price2">
                    <div id="burst-12">
                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 122.88" style="enable-background:new 0 0 122.88 122.88" xml:space="preserve">
                            <style type="text/css">
                                .st0{fill-rule:evenodd;clip-rule:evenodd;}
                            </style>
                            <g>
                                <polygon class="st0" points="19.44,50.16 8.22,30.72 30.72,30.72 30.72,8.13 50.16,19.44 61.44,0 72.72,19.44 92.16,8.13 92.16,30.72 114.75,30.72 103.44,50.16 122.88,61.44 103.44,72.72 114.75,92.16 92.16,92.16 92.16,114.66 72.72,103.44 61.44,122.88 50.16,103.44 30.72,114.66 30.72,92.16 8.22,92.16 19.44,72.72 0,61.44 19.44,50.16"/>
                            </g>
                        </svg>
                        <span id="price-togo">To Go: <br> 6,90 €</span>
                    </div>
                </div>
            </div>
        </div>
        <p style="text-align: center;margin: 5px;padding: 5px;" data-intro="Genießen Sie auch unser exklusives DRY AGED Fleisch, perfekt zum Mitnehmen oder Bestellen!">Genießen Sie außerdem unsere exklusive Auswahl an DRY AGED Fleisch – perfekt zum Mitnehmen oder Bestellen!</p>
        <div class="footer" data-intro="Im Footer finden Sie unsere Kontaktinformationen und einen Link zur Website des Entwicklers.">
            <p>Metzgerei Günther, Schlesierstr. 29, 78315 Radolfzell</p>
            <p>Tel.: +49 (0) 7732 52876 | Email: <a href="mailto:info@guenther-metzgerei.de">info@guenther-metzgerei.de</a></p>
            <p><a href="http://www.guenther-metzgerei.de">www.guenther-metzgerei.de</a></p>
            <button onclick="nextDish()">Nächstes Gericht</button>
            <button onclick="startTour()">Tour starten</button>
            <p>&copy; 2024. All Rights Reserved. Developed by 
                <a href="https://acme-prototypes.com/" class="acme-link">
                    <img src="pics/ACME (Small).png" alt="ACME" class="acme-logo" style="width: 70px;position: relative;top: 7px;">                </a>
            </p>
        </div>
    </div>

    <script type="module">
        import { dishes } from './dishes.js';
        import { weekDishMap } from './weekDishMap.js';

        function updateFlyer(dish) {
            document.getElementById('dish-name').textContent = dish.name;
            document.getElementById('dish-image').src = dish.image;
            document.getElementById('price-dinein').textContent = dish.priceDineIn;
            document.getElementById('price-togo').innerHTML = dish.priceToGo;
        }

        function getCurrentWeekIndex() {
            const date = new Date();
            const oneJan = new Date(date.getFullYear(), 0, 1);
            const numberOfDays = Math.floor((date - oneJan) / (24 * 60 * 60 * 1000));
            const weekNumber = Math.ceil((date.getDay() + 1 + numberOfDays) / 7);
            console.log(`Aktuelles Datum: ${date.toDateString()}, Kalenderwoche: ${weekNumber}`);
            return weekNumber;
        }

        let currentIndex = getCurrentWeekIndex();

        function nextDish() {
            currentIndex = (currentIndex % Object.keys(weekDishMap).length) + 1;
            updateFlyer(weekDishMap[currentIndex]);
        }

        const currentWeekIndex = getCurrentWeekIndex();
        const initialDish = weekDishMap[currentWeekIndex] || dishes[0]; // Standard auf erstes Gericht, falls keine Zuordnung vorhanden
        updateFlyer(initialDish);

        // Expose nextDish and startTour to global scope
        window.nextDish = nextDish;
        window.startTour = function() {
            introJs().setOptions({
                steps: [
                    {
                        intro: "Willkommen bei der geführten Tour durch unseren neuen HTML-Flyer!"
                    },
                    {
                        element: document.querySelector('.header'),
                        intro: "Ihr Logo in Szene gesetzt vor der Höri und einer modernen, stilisierten Grafik."
                    },
                    {
                        element: document.querySelector('.content'),
                        intro: "Hier sehen Sie ihre wöchentlich wechselnden Gerichte, die dynamisch nach Kalenderwoche angezeigt werden."
                    },
                    {
                        element: document.getElementById('dish-name'),
                        intro: "Der Name und das Bild des Gerichts aktualisieren sich automatisch."
                    },
                    {
                        element: document.querySelector('.price'),
                        intro: "Unterschiedliche Preise für Dine-In und To-Go."
                    },
                    {
                        element: document.querySelector('.footer'),
                        intro: "Im Footer finden Sie ihre Kontaktinformationen die direkte Links zu ihren anderen Formaten sind."
                    },
                    {
                        intro: "Warum HTML und nicht nur ein PNG-Bild? Mit HTML können wir SEO verbessern, da Suchmaschinen nur so den Text lesen können. Außerdem sind unsere Inhalte zugänglicher für Menschen mit Behinderungen, die Screenreader verwenden. All diese Vorteile helfen, die Sichtbarkeit und Benutzerfreundlichkeit unserer Inhalte zu erhöhen."
                    },
                    {
                        intro: "Um die Gerichte zu ändern, bearbeiten Sie einfach eine Datei. Hier können Sie den Namen, das Bild und die Preise für jedes Gericht anpassen. Fügen Sie einfach ein Foto des neuen Gerichts hinzu und passen Sie den Namen und Preis an."
                    },
                    {
                        intro: " Die Zuordnung der Gerichte zu den Kalenderwochen finden Sie im Skript 'weekDishMap.js'. Hier legen Sie fest, welches Gericht in welcher Woche angezeigt wird. Diese HTML-Datei kann dann auf die internen Displays im Laden übertragen werden, um die Gerichte/Waren dynamisch anzuzeigen."
                    }
                    
                ]
            }).start();
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/4.0.0/intro.min.js"></script>
</body>
</html>
