<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metzgerei Günther Flyer</title>
    <link rel="stylesheet" href="styles1.css">
</head>
<body>
    <div class="flyer">
        <div class="header">
            <img src="pics/logo background small.png" alt="logo small" class="header-img">
        </div>
        <div class="content">
            <h1>Wechselnde Gerichte <br>jeden Freitag<br> zum Feierabend von<br> 16 bis 18 Uhr</h1>
            <h2 class="custom-font">Diese Woche:</h2>
            <img id="dish-image" src="pics/Layer1.png" alt="Dish Image" class="content-img">
            <h2 id="dish-name" class="dish-name">Bratwurst mit Potato Wedges</h2>
            <div class="price">
                <div class="price3">
                    <p id="price-dinein">7,60 €</p>
                </div>
                <div class="price2">
                    <div id="burst-12">
                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 122.88" style="enable-background:new 0 0 122.88 122.88" xml:space="preserve">
                            <style type="text/css">
                                .st0{fill-rule:evenodd;clip-rule:evenodd;}
                            </style>
                            <g>
                                <polygon class="st0" points="19.44,50.16 8.22,30.72 30.72,30.72 30.72,8.13 50.16,19.44 61.44,0 72.72,19.44 92.16,8.13 92.16,30.72 114.75,30.72 103.44,50.16 122.88,61.44 103.44,72.72 114.75,92.16 92.16,92.16 92.16,114.66 72.72,103.44 61.44,122.88 50.16,103.44 30.72,114.66 30.72,92.16 8.22,92.16 19.44,72.72 0,61.44 19.44,50.16"/>
                            </g>
                        </svg>
                        <span id="price-togo">To Go: <br> 6,90 €</span>
                    </div>
                </div>
            </div>
        </div>
        <p style="text-align: center;margin: 5px;padding: 5px;">Genießen Sie außerdem unsere exklusive Auswahl an DRY AGED Fleisch – perfekt zum Mitnehmen oder Bestellen!</p>
        <div class="footer">
            <p>Metzgerei Günther, Schlesierstr. 29, 78315 Radolfzell</p>
            <p>Tel.: +49 (0) 7732 52876 | Email: <a href="mailto:info@guenther-metzgerei.de">info@guenther-metzgerei.de</a></p>
            <p><a href="http://www.guenther-metzgerei.de">www.guenther-metzgerei.de</a></p>
            <button onclick="nextDish()">Nächstes Gericht</button>
        </div>
    </div>

    <script type="module">
        import { dishes } from './dishes.js';
        import { weekDishMap } from './weekDishMap.js';

        function updateFlyer(dish) {
            document.getElementById('dish-name').textContent = dish.name;
            document.getElementById('dish-image').src = dish.image;
            document.getElementById('price-dinein').textContent = dish.priceDineIn;
            document.getElementById('price-togo').innerHTML = dish.priceToGo;
        }

        function getCurrentWeekIndex() {
            const date = new Date();
            const oneJan = new Date(date.getFullYear(), 0, 1);
            const numberOfDays = Math.floor((date - oneJan) / (24 * 60 * 60 * 1000));
            const weekNumber = Math.ceil((date.getDay() + 1 + numberOfDays) / 7);
            console.log(`Current date: ${date.toDateString()}, Calendar Week: ${weekNumber}`);
            return weekNumber;
        }

        let currentIndex = getCurrentWeekIndex();

        function nextDish() {
            currentIndex = (currentIndex % Object.keys(weekDishMap).length) + 1;
            updateFlyer(weekDishMap[currentIndex]);
        }

        const currentWeekIndex = getCurrentWeekIndex();
        const initialDish = weekDishMap[currentWeekIndex] || dishes[0]; // Default to first dish if no mapping exists
        updateFlyer(initialDish);

        // Expose nextDish to global scope
        window.nextDish = nextDish;
    </script>
</body>
</html>
